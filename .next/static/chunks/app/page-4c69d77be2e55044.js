(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,a,t)=>{"use strict";t.d(a,{$:()=>i});var r=t(5155),o=t(2115),s=t(9708),l=t(2085),n=t(9434);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=o.forwardRef((e,a)=>{let{className:t,variant:o,size:l,asChild:i=!1,...d}=e,m=i?s.DX:"button";return(0,r.jsx)(m,{className:(0,n.cn)(c({variant:o,size:l,className:t})),ref:a,...d})});i.displayName="Button"},552:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ea});var r=t(5155),o=t(2115);let s=()=>{let[e,a]=(0,o.useState)({valorBruto:0,desconto:0,valorNegociado:0,formasPagamento:[],valorRecebidoTotal:0,descontoReal:0,valorRestante:0,travamentos:{valorNegociado:!1,descontoReal:!1,limiteDescontoReal:25}}),t=(0,o.useMemo)(()=>["ENTRADA","BOLETO","FINANCEIRA","CARTAO"],[]),r=(0,o.useCallback)(e=>{switch(console.log("Calculando valor recebido para:",e),e.tipo){case"ENTRADA":default:return e.valor;case"FINANCEIRA":{if(!e.parcelas||!e.taxaJuros)return e.valor;let a=e.taxaJuros/100,t=e.parcelas,r=e.valor/Math.pow(1+a,t);return console.log("Financeira: valor=".concat(e.valor,", parcelas=").concat(t,", taxa=").concat(e.taxaJuros,"%, VP=").concat(r)),r}case"CARTAO":{if(!e.deflacao||!e.jurosAntecipacao||!e.parcelas)return e.valor;let a=1-e.deflacao/100,t=1-e.jurosAntecipacao/100*e.parcelas,r=e.valor*a*t;return console.log("Cart\xe3o: valor=".concat(e.valor,", defla\xe7\xe3o=").concat(e.deflacao,"%, juros=").concat(e.jurosAntecipacao,"%, VR=").concat(r)),r}case"BOLETO":{if(!e.parcelas||!e.custoCapital)return e.valor;let a=e.custoCapital/100,t=e.valor/Math.pow(1+a,e.parcelas);return console.log("Boleto: valor=".concat(e.valor,", parcelas=").concat(e.parcelas,", custo=").concat(e.custoCapital,"%, VP=").concat(t)),t}}},[]),s=(0,o.useCallback)((e,a)=>{console.log("Redistribuindo valores. Novo valor negociado:",e);let r=e-a.reduce((e,a)=>e+a.valor,0);if(.01>Math.abs(r))return a;console.log("Diferen\xe7a a redistribuir:",r),a.filter(e=>e.travado);let o=a.filter(e=>!e.travado);if(0===o.length)return console.log("Todas as formas est\xe3o travadas"),null;let s=o.sort((e,a)=>t.indexOf(e.tipo)-t.indexOf(a.tipo));console.log("Formas ordenadas por prioridade:",s.map(e=>e.tipo));let l=[...a];if(0===s.reduce((e,a)=>e+a.valor,0)){console.log("Todas as formas n\xe3o travadas t\xeam valor zero, distribuindo igualmente");let e=r/s.length;s.forEach(a=>{let t=l.findIndex(e=>e.id===a.id),r=Math.max(0,e);l[t]={...l[t],valor:r}})}else{console.log("Ajustando apenas a primeira forma na ordem de prioridade");let e=s[0],a=l.findIndex(a=>a.id===e.id),t=Math.max(0,e.valor+r);l[a]={...l[a],valor:t},console.log("Forma ".concat(e.tipo," ajustada de ").concat(e.valor," para ").concat(t))}return l},[t]),l=(0,o.useCallback)(e=>{console.log("Recalculando simula\xe7\xe3o com updates:",e),a(a=>{let t={...a,...e};t.travamentos.valorNegociado?void 0!==e.valorBruto&&e.valorBruto>0&&(t.desconto=(t.valorBruto-t.valorNegociado)/t.valorBruto*100):t.valorNegociado=t.valorBruto*(1-t.desconto/100),t.formasPagamento=t.formasPagamento.map(e=>({...e,valorRecebido:r(e)})),t.valorRecebidoTotal=t.formasPagamento.reduce((e,a)=>e+a.valorRecebido,0),t.descontoReal=t.valorBruto>0?(t.valorBruto-t.valorRecebidoTotal)/t.valorBruto*100:0;let o=t.formasPagamento.reduce((e,a)=>e+a.valor,0);return t.valorRestante=t.valorNegociado-o,console.log("Simula\xe7\xe3o atualizada:",t),t})},[r]),n=(0,o.useCallback)(e=>{console.log("Editando valor negociado para:",e),a(a=>{let t=s(e,a.formasPagamento);if(!t)return alert("N\xe3o \xe9 poss\xedvel alterar o valor. Todas as formas de pagamento est\xe3o travadas."),a;let o={...a,valorNegociado:e,formasPagamento:t.map(e=>({...e,valorRecebido:r(e)}))};o.desconto=o.valorBruto>0?(o.valorBruto-o.valorNegociado)/o.valorBruto*100:0,o.valorRecebidoTotal=o.formasPagamento.reduce((e,a)=>e+a.valorRecebido,0),o.descontoReal=o.valorBruto>0?(o.valorBruto-o.valorRecebidoTotal)/o.valorBruto*100:0;let l=o.formasPagamento.reduce((e,a)=>e+a.valor,0);return o.valorRestante=o.valorNegociado-l,o})},[s,r]),c=(0,o.useCallback)(e=>{console.log("Editando desconto real para:",e),a(a=>{let t=a.valorBruto*(1-e/100),o=s(t,a.formasPagamento);if(!o)return alert("N\xe3o \xe9 poss\xedvel alterar o desconto. Todas as formas de pagamento est\xe3o travadas."),a;let l={...a,desconto:e,valorNegociado:t,formasPagamento:o.map(e=>({...e,valorRecebido:r(e)}))};l.valorRecebidoTotal=l.formasPagamento.reduce((e,a)=>e+a.valorRecebido,0),l.descontoReal=l.valorBruto>0?(l.valorBruto-l.valorRecebidoTotal)/l.valorBruto*100:0;let n=l.formasPagamento.reduce((e,a)=>e+a.valor,0);return l.valorRestante=l.valorNegociado-n,l})},[s,r]),i=(0,o.useCallback)(e=>{console.log("Editando valor bruto para:",e),l({valorBruto:e})},[l]),d=(0,o.useCallback)(e=>{console.log("Adicionando forma:",e),a(a=>{if(a.travamentos.descontoReal){let t={...e,id:Date.now().toString(),valorRecebido:0};t.valorRecebido=r(t);let o=a.valorRecebidoTotal+t.valorRecebido;if((a.valorBruto>0?(a.valorBruto-o)/a.valorBruto*100:0)>a.travamentos.limiteDescontoReal)return alert("N\xe3o \xe9 poss\xedvel adicionar esta forma. O desconto real excederia o limite de ".concat(a.travamentos.limiteDescontoReal,"%")),a}let t={...e,id:Date.now().toString(),valorRecebido:0,travado:!1};t.valorRecebido=r(t);let o=[...a.formasPagamento,t],s={...a,formasPagamento:o};s.valorRecebidoTotal=o.reduce((e,a)=>e+a.valorRecebido,0),s.descontoReal=s.valorBruto>0?(s.valorBruto-s.valorRecebidoTotal)/s.valorBruto*100:0;let l=o.reduce((e,a)=>e+a.valor,0);return s.valorRestante=s.valorNegociado-l,console.log("Nova simula\xe7\xe3o com forma adicionada:",s),s})},[r]),m=(0,o.useCallback)((e,t)=>{console.log("Atualizando forma:",e,t),a(a=>{let o=a.formasPagamento.map(a=>{if(a.id===e){if(a.travado&&t.valor!==a.valor)return console.log("Forma travada, n\xe3o \xe9 poss\xedvel alterar o valor"),a;let e={...a,...t};return e.valorRecebido=r(e),e}return a}),s={...a,formasPagamento:o};s.valorRecebidoTotal=o.reduce((e,a)=>e+a.valorRecebido,0),s.descontoReal=s.valorBruto>0?(s.valorBruto-s.valorRecebidoTotal)/s.valorBruto*100:0;let l=o.reduce((e,a)=>e+a.valor,0);return s.valorRestante=s.valorNegociado-l,console.log("Simula\xe7\xe3o atualizada ap\xf3s edi\xe7\xe3o:",s),s})},[r]),u=(0,o.useCallback)(e=>{console.log("Removendo forma:",e),a(a=>{let t=a.formasPagamento.filter(a=>a.id!==e);return{...a,formasPagamento:t,valorRecebidoTotal:t.reduce((e,a)=>e+a.valorRecebido,0),descontoReal:a.valorBruto>0?(a.valorBruto-t.reduce((e,a)=>e+a.valorRecebido,0))/a.valorBruto*100:0,valorRestante:a.valorNegociado-t.reduce((e,a)=>e+a.valor,0)}})},[]),x=(0,o.useCallback)(()=>{console.log("Limpando todas as formas"),a(e=>({...e,formasPagamento:[],valorRecebidoTotal:0,descontoReal:100*(e.valorBruto>0),valorRestante:e.valorNegociado}))},[]);return{simulacao:e,recalcularSimulacao:l,adicionarForma:d,atualizarForma:m,removerForma:u,limparFormas:x,alternarTravamento:(0,o.useCallback)((e,t)=>{a(a=>({...a,travamentos:{...a.travamentos,[e]:!a.travamentos[e],...void 0!==t&&{limiteDescontoReal:t}}}))},[]),alternarTravamentoForma:(0,o.useCallback)(e=>{a(a=>({...a,formasPagamento:a.formasPagamento.map(a=>a.id===e?{...a,travado:!a.travado}:a)}))},[]),editarValorNegociado:n,editarValorBruto:i,editarDescontoReal:c}};var l=t(9434);let n=o.forwardRef((e,a)=>{let{className:t,type:o,...s}=e;return(0,r.jsx)("input",{type:o,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});n.displayName="Input";var c=t(968);let i=(0,t(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(c.b,{ref:a,className:(0,l.cn)(i(),t),...o})});d.displayName=c.b.displayName;var m=t(285),u=t(3904);let x=e=>{let{valorBruto:a,desconto:t,valorNegociado:o,onValorBrutoChange:s,onDescontoChange:l,onAtualizarSimulacao:c}=e;return(0,r.jsx)("section",{className:"bg-white p-6 rounded-lg shadow-sm border mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{htmlFor:"valorBruto",children:"Valor dos Ambientes (R$)"}),(0,r.jsx)(n,{id:"valorBruto",type:"number",placeholder:"50000",value:a||"",onChange:e=>s(Number(e.target.value)||0)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{htmlFor:"desconto",children:"Desconto (%)"}),(0,r.jsx)(n,{id:"desconto",type:"number",placeholder:"20",min:"0",max:"100",value:t||"",onChange:e=>l(Number(e.target.value)||0)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d,{children:["Valor Negociado: R$ ",o.toFixed(2).replace(".",",")]}),(0,r.jsxs)(m.$,{onClick:c,className:"w-full flex items-center gap-2",variant:"outline",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),"Atualizar"]})]})]})})},p=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...o})});p.displayName="Card";let v=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...o})});v.displayName="CardHeader";let f=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...o})});f.displayName="CardTitle",o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...o})}).displayName="CardDescription";let g=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...o})});g.displayName="CardContent",o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...o})}).displayName="CardFooter";var h=t(3717),N=t(7178),b=t(4416);let j=N.bL,y=N.l9,R=N.ZL;N.bm;let w=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(N.hJ,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o})});w.displayName=N.hJ.displayName;let C=o.forwardRef((e,a)=>{let{className:t,children:o,...s}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(w,{}),(0,r.jsxs)(N.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[o,(0,r.jsxs)(N.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(b.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=N.UC.displayName;let A=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};A.displayName="DialogHeader";let T=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(N.hE,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...o})});T.displayName=N.hE.displayName,o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(N.VY,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...o})}).displayName=N.VY.displayName;let B=e=>{let{isOpen:a,onClose:t,title:s,currentValue:l,onSave:c,isPercentage:i=!1}=e,[u,x]=(0,o.useState)(l);return(0,r.jsx)(j,{open:a,onOpenChange:t,children:(0,r.jsxs)(C,{className:"max-w-md",children:[(0,r.jsx)(A,{children:(0,r.jsxs)(T,{children:["Editar ",s]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(d,{children:["Valor Atual: ",i?"".concat(l.toFixed(1),"%"):new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l)]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:i?"Novo Percentual (%)":"Novo Valor (R$)"}),(0,r.jsx)(n,{type:"number",step:i?"0.1":"0.01",value:u||"",onChange:e=>x(Number(e.target.value)||0),placeholder:i?"Digite o novo percentual":"Digite o novo valor"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.$,{onClick:()=>{c(u),t()},className:"flex-1",children:"Confirmar"}),(0,r.jsx)(m.$,{variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"})]})]})]})})},E=e=>{let{valorBruto:a,valorNegociado:t,descontoReal:s,valorRecebidoTotal:l,valorRestante:n,onEditValorNegociado:c,onEditDescontoReal:i}=e,[d,u]=(0,o.useState)({isOpen:!1,title:"",currentValue:0,onSave:()=>{},isPercentage:!1}),x=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),N=e=>e<0?{cardClass:"border-l-4 border-l-amber-400 bg-amber-50/30",valueClass:"text-amber-700",statusText:"Excedeu",statusClass:"text-amber-600"}:{cardClass:"",valueClass:"",statusText:"Alocar",statusClass:"text-gray-500"},b=function(e,a,t){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u({isOpen:!0,title:e,currentValue:a,onSave:t,isPercentage:r})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[(0,r.jsxs)(p,{children:[(0,r.jsx)(v,{className:"pb-2",children:(0,r.jsx)(f,{className:"text-sm font-medium",children:"Valor dos Ambientes "})}),(0,r.jsxs)(g,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:x(a)}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"100%"})]})]}),(0,r.jsxs)(p,{className:"relative group",children:[(0,r.jsx)(v,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(f,{className:"text-sm font-medium",children:"Valor Negociado"}),c&&(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>b("Valor Negociado",t,c),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(h.A,{className:"h-3 w-3"})})]})}),(0,r.jsxs)(g,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:x(t)}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[a>0?(t/a*100).toFixed(1):0,"%"]})]})]}),(0,r.jsxs)(p,{className:"border-l-4 border-l-orange-500 relative group",children:[(0,r.jsx)(v,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(f,{className:"text-sm font-medium",children:"Desconto Real"}),i&&(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>b("Desconto Real",s,i,!0),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(h.A,{className:"h-3 w-3"})})]})}),(0,r.jsxs)(g,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat((e=>e<15?"text-green-600":e<25?"text-yellow-600":"text-red-600")(s)),children:[s.toFixed(1),"%"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:s<15?"\xd3timo":s<25?"Moderado":"Alto"})]})]}),(0,r.jsxs)(p,{children:[(0,r.jsx)(v,{className:"pb-2",children:(0,r.jsx)(f,{className:"text-sm font-medium",children:"Valor Recebido"})}),(0,r.jsxs)(g,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:x(l)}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"L\xedquido"})]})]}),(0,r.jsxs)(p,{className:N(n).cardClass,children:[(0,r.jsx)(v,{className:"pb-2",children:(0,r.jsx)(f,{className:"text-sm font-medium",children:"Valor Restante"})}),(0,r.jsxs)(g,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(N(n).valueClass),children:x(n)}),(0,r.jsx)("p",{className:"text-xs ".concat(N(n).statusClass),children:N(n).statusText})]})]})]}),(0,r.jsx)(B,{isOpen:d.isOpen,onClose:()=>{u(e=>({...e,isOpen:!1}))},title:d.title,currentValue:d.currentValue,onSave:d.onSave,isPercentage:d.isPercentage})]})};var D=t(4884);let k=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(D.bL,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...o,ref:a,children:(0,r.jsx)(D.zi,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});k.displayName=D.bL.displayName;var O=t(2919);let F=e=>{let{forma:a,onRemover:t,onEditar:o,onAlternarTravamento:s}=e,l=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),n=e=>e?new Date(e).toLocaleDateString("pt-BR"):"";return(0,r.jsxs)(p,{className:"relative ".concat((e=>{let t=a.travado?"border-l-4 bg-gray-100":"border-l-4";switch(e){case"ENTRADA":return"".concat(t," border-l-green-500 ").concat(a.travado?"":"bg-green-50");case"FINANCEIRA":return"".concat(t," border-l-blue-500 ").concat(a.travado?"":"bg-blue-50");case"CARTAO":return"".concat(t," border-l-purple-500 ").concat(a.travado?"":"bg-purple-50");case"BOLETO":return"".concat(t," border-l-orange-500 ").concat(a.travado?"":"bg-orange-50");default:return t}})(a.tipo)),children:[(0,r.jsx)(v,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)(f,{className:"text-sm font-medium flex items-center gap-2",children:[(e=>({ENTRADA:"Entrada (\xc0 vista)",FINANCEIRA:"Financeira",CARTAO:"Cart\xe3o",BOLETO:"Boleto Loja"})[e]||e)(a.tipo),a.travado&&(0,r.jsx)(O.A,{className:"h-3 w-3 text-gray-500"})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>o(a),className:"h-6 w-6 p-0 text-gray-400 hover:text-blue-500",title:"Editar",disabled:a.travado,children:(0,r.jsx)(h.A,{className:"h-3 w-3"})}),(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>t(a.id),className:"h-6 w-6 p-0 text-gray-400 hover:text-red-500",title:"Remover",children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})]})]})}),(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold ".concat(a.travado?"text-gray-600":""),children:l(a.valor)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:(()=>{switch(a.tipo){case"FINANCEIRA":{let e="".concat(a.parcelas,"x - ").concat(a.taxaJuros,"% a.m.");return a.dataVencimento?"".concat(e," - Venc: ").concat(n(a.dataVencimento)):e}case"CARTAO":return"".concat(a.parcelas,"x - ").concat(a.deflacao,"% defla\xe7\xe3o");case"BOLETO":return"".concat(a.parcelas,"x - ").concat(a.custoCapital,"% custo");default:return"\xc0 vista"}})()})]}),(0,r.jsxs)("div",{className:"border-t pt-2",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Valor Recebido:"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-green-600",children:l(a.valorRecebido)})]}),(0,r.jsxs)("div",{className:"border-t pt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(k,{checked:a.travado||!1,onCheckedChange:()=>s(a.id)}),(0,r.jsx)(d,{className:"text-xs font-medium",children:a.travado?"Valor Travado":"Travar Valor"})]}),a.travado&&(0,r.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"FIXO"})]}),a.travado&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Valor confirmado pelo cliente"})]})]})})]})},P=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",t),...o})})});P.displayName="Table";let V=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",t),...o})});V.displayName="TableHeader";let I=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...o})});I.displayName="TableBody",o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...o})}).displayName="TableFooter";let L=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...o})});L.displayName="TableRow";let S=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...o})});S.displayName="TableHead";let z=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...o})});z.displayName="TableCell",o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...o})}).displayName="TableCaption";var J=t(9074);let $=e=>{let{formasPagamento:a}=e,t=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),o=e=>new Date(e).toLocaleDateString("pt-BR"),s=(()=>{let e=[];return a.forEach(a=>{if("ENTRADA"===a.tipo){let t=new Date().toISOString().split("T")[0];e.push({data:t,descricao:"Entrada (\xc0 vista)",valor:a.valor,tipo:"ENTRADA"})}else if("FINANCEIRA"===a.tipo&&a.dataVencimento&&a.parcelas){let t=new Date(a.dataVencimento),r=a.valor/a.parcelas;for(let o=0;o<a.parcelas;o++){let s=new Date(t);s.setMonth(s.getMonth()+o),e.push({data:s.toISOString().split("T")[0],descricao:"Financeira - Parcela ".concat(o+1,"/").concat(a.parcelas),valor:r,tipo:"FINANCEIRA",parcela:"".concat(o+1,"/").concat(a.parcelas)})}}else if("BOLETO"===a.tipo&&a.parcelas){let t=new Date,r=a.valor/a.parcelas;for(let o=0;o<a.parcelas;o++){let s=new Date(t);s.setMonth(s.getMonth()+o+1),e.push({data:s.toISOString().split("T")[0],descricao:"Boleto Loja - Parcela ".concat(o+1,"/").concat(a.parcelas),valor:r,tipo:"BOLETO",parcela:"".concat(o+1,"/").concat(a.parcelas)})}}else if("CARTAO"===a.tipo){let t=new Date().toISOString().split("T")[0],r=1===a.parcelas?"Cart\xe3o (\xc0 vista - Antecipado)":"Cart\xe3o ".concat(a.parcelas,"x (Antecipado)");e.push({data:t,descricao:r,valor:a.valorRecebido,tipo:"CARTAO"})}}),e.sort((e,a)=>new Date(e.data).getTime()-new Date(a.data).getTime())})(),l=e=>{switch(e){case"ENTRADA":return"bg-green-50 border-l-4 border-l-green-500";case"FINANCEIRA":return"bg-blue-50 border-l-4 border-l-blue-500";case"CARTAO":return"bg-purple-50 border-l-4 border-l-purple-500";case"BOLETO":return"bg-orange-50 border-l-4 border-l-orange-500";default:return""}};return 0===s.length?null:(0,r.jsxs)(p,{className:"mt-6",children:[(0,r.jsx)(v,{children:(0,r.jsxs)(f,{className:"flex items-center gap-2",children:[(0,r.jsx)(J.A,{className:"h-5 w-5"}),"\uD83D\uDCC5 Cronograma de Recebimento"]})}),(0,r.jsxs)(g,{children:[(0,r.jsx)("div",{className:"rounded-lg border",children:(0,r.jsxs)(P,{children:[(0,r.jsx)(V,{children:(0,r.jsxs)(L,{className:"bg-gray-50",children:[(0,r.jsx)(S,{className:"font-semibold",children:"Data"}),(0,r.jsx)(S,{className:"font-semibold",children:"Descri\xe7\xe3o"}),(0,r.jsx)(S,{className:"font-semibold text-right",children:"Valor"})]})}),(0,r.jsx)(I,{children:s.map((e,a)=>(0,r.jsxs)(L,{className:l(e.tipo),children:[(0,r.jsx)(z,{className:"font-medium",children:o(e.data)}),(0,r.jsx)(z,{children:e.descricao}),(0,r.jsx)(z,{className:"text-right font-semibold",children:t(e.valor)})]},a))})]})}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-2 bg-green-500 rounded"}),(0,r.jsx)("span",{children:"Entrada"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-2 bg-blue-500 rounded"}),(0,r.jsx)("span",{children:"Financeira"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-2 bg-purple-500 rounded"}),(0,r.jsx)("span",{children:"Cart\xe3o"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-2 bg-orange-500 rounded"}),(0,r.jsx)("span",{children:"Boleto"})]})]})]})]})};var M=t(2110),_=t(6474),U=t(7863),q=t(5196);let H=M.bL;M.YJ;let Y=M.WT,X=o.forwardRef((e,a)=>{let{className:t,children:o,...s}=e;return(0,r.jsxs)(M.l9,{ref:a,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[o,(0,r.jsx)(M.In,{asChild:!0,children:(0,r.jsx)(_.A,{className:"h-4 w-4 opacity-50"})})]})});X.displayName=M.l9.displayName;let Z=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(M.PP,{ref:a,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...o,children:(0,r.jsx)(U.A,{className:"h-4 w-4"})})});Z.displayName=M.PP.displayName;let Q=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(M.wn,{ref:a,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...o,children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})});Q.displayName=M.wn.displayName;let W=o.forwardRef((e,a)=>{let{className:t,children:o,position:s="popper",...n}=e;return(0,r.jsx)(M.ZL,{children:(0,r.jsxs)(M.UC,{ref:a,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[(0,r.jsx)(Z,{}),(0,r.jsx)(M.LM,{className:(0,l.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(Q,{})]})})});W.displayName=M.UC.displayName,o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(M.JU,{ref:a,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...o})}).displayName=M.JU.displayName;let G=o.forwardRef((e,a)=>{let{className:t,children:o,...s}=e;return(0,r.jsxs)(M.q7,{ref:a,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(M.VF,{children:(0,r.jsx)(q.A,{className:"h-4 w-4"})})}),(0,r.jsx)(M.p4,{children:o})]})});G.displayName=M.q7.displayName,o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,r.jsx)(M.wv,{ref:a,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",t),...o})}).displayName=M.wv.displayName;var K=t(4616),ee=t(2525);function ea(){let{simulacao:e,recalcularSimulacao:a,adicionarForma:t,removerForma:l,limparFormas:c,atualizarForma:i,alternarTravamentoForma:u,editarValorNegociado:h,editarValorBruto:N,editarDescontoReal:b}=s(),[R,w]=(0,o.useState)(!1),[B,D]=(0,o.useState)(null),[k,O]=(0,o.useState)({tipo:"ENTRADA",valor:0,parcelas:1,taxaJuros:2.5,deflacao:5,jurosAntecipacao:1.99,custoCapital:1.5,dataVencimento:""}),P=()=>{O({tipo:"ENTRADA",valor:0,parcelas:1,taxaJuros:2.5,deflacao:5,jurosAntecipacao:1.99,custoCapital:1.5,dataVencimento:""}),D(null)},V=e=>{D(e),O({tipo:e.tipo,valor:e.valor,parcelas:e.parcelas||1,taxaJuros:e.taxaJuros||2.5,deflacao:e.deflacao||5,jurosAntecipacao:e.jurosAntecipacao||1.99,custoCapital:e.custoCapital||1.5,dataVencimento:e.dataVencimento||""}),w(!0)};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsxs)("header",{className:"text-center py-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"\uD83E\uDDEE Simulador Financeiro de Proposta"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Sistema de Valida\xe7\xe3o - Fluyt"})]}),(0,r.jsx)(x,{valorBruto:e.valorBruto,desconto:e.desconto,valorNegociado:e.valorNegociado,onValorBrutoChange:e=>a({valorBruto:e}),onDescontoChange:e=>a({desconto:e}),onAtualizarSimulacao:()=>h(e.valorNegociado)}),(0,r.jsx)(E,{valorBruto:e.valorBruto,valorNegociado:e.valorNegociado,descontoReal:e.descontoReal,valorRecebidoTotal:e.valorRecebidoTotal,valorRestante:e.valorRestante,onEditValorNegociado:h,onEditDescontoReal:b}),(0,r.jsxs)(p,{children:[(0,r.jsx)(v,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(f,{className:"text-xl",children:"\uD83D\uDCB3 Formas de Pagamento"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(j,{open:R,onOpenChange:w,children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsxs)(m.$,{onClick:()=>{P(),w(!0)},className:"flex items-center gap-2",children:[(0,r.jsx)(K.A,{className:"h-4 w-4"}),"Adicionar Forma"]})}),(0,r.jsxs)(C,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(A,{children:(0,r.jsxs)(T,{children:[B?"Editar":"Adicionar"," Forma de Pagamento"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Tipo"}),(0,r.jsxs)(H,{value:k.tipo,onValueChange:e=>O(a=>({...a,tipo:e})),children:[(0,r.jsx)(X,{children:(0,r.jsx)(Y,{})}),(0,r.jsxs)(W,{children:[(0,r.jsx)(G,{value:"ENTRADA",children:"Entrada (\xc0 vista)"}),(0,r.jsx)(G,{value:"FINANCEIRA",children:"Financeira"}),(0,r.jsx)(G,{value:"CARTAO",children:"Cart\xe3o"}),(0,r.jsx)(G,{value:"BOLETO",children:"Boleto Loja"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Valor (R$)"}),(0,r.jsx)(n,{type:"number",value:k.valor||"",onChange:e=>O(a=>({...a,valor:Number(e.target.value)||0})),placeholder:"10000"})]}),(()=>{if("ENTRADA"===k.tipo)return null;let{min:e,max:a}=(k.tipo,{min:1,max:24});return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Parcelas"}),(0,r.jsx)(n,{type:"number",min:e,max:a,value:k.parcelas||"",onChange:t=>O(r=>({...r,parcelas:Math.min(a,Math.max(e,Number(t.target.value)||1))})),placeholder:"De ".concat(e," a ").concat(a)})]})})(),"FINANCEIRA"===k.tipo&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Taxa de Juros (% a.m.)"}),(0,r.jsx)(n,{type:"number",step:"0.1",value:k.taxaJuros||"",onChange:e=>O(a=>({...a,taxaJuros:Number(e.target.value)||0})),placeholder:"2.5"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Data de Vencimento"}),(0,r.jsx)(n,{type:"date",value:k.dataVencimento,onChange:e=>O(a=>({...a,dataVencimento:e.target.value}))})]})]}),"CARTAO"===k.tipo&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Defla\xe7\xe3o (%)"}),(0,r.jsx)(n,{type:"number",step:"0.1",value:k.deflacao||"",onChange:e=>O(a=>({...a,deflacao:Number(e.target.value)||0})),placeholder:"5"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Juros de Antecipa\xe7\xe3o (% por parcela)"}),(0,r.jsx)(n,{type:"number",step:"0.01",value:k.jurosAntecipacao||"",onChange:e=>O(a=>({...a,jurosAntecipacao:Number(e.target.value)||0})),placeholder:"1.99"})]})]}),"BOLETO"===k.tipo&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d,{children:"Custo de Capital (% a.m.)"}),(0,r.jsx)(n,{type:"number",step:"0.1",value:k.custoCapital||"",onChange:e=>O(a=>({...a,custoCapital:Number(e.target.value)||0})),placeholder:"1.5"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,r.jsx)(m.$,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),(0,r.jsx)(m.$,{onClick:()=>{if(console.log("Submitting forma:",k),k.valor<=0)return void alert("Valor deve ser maior que zero");if("FINANCEIRA"===k.tipo&&!k.dataVencimento)return void alert("Data de vencimento \xe9 obrigat\xf3ria para financeiras");let e={tipo:k.tipo,valor:k.valor,..."FINANCEIRA"===k.tipo&&{parcelas:k.parcelas,taxaJuros:k.taxaJuros,dataVencimento:k.dataVencimento},..."CARTAO"===k.tipo&&{parcelas:k.parcelas,deflacao:k.deflacao,jurosAntecipacao:k.jurosAntecipacao},..."BOLETO"===k.tipo&&{parcelas:k.parcelas,custoCapital:k.custoCapital}};B?i(B.id,e):t(e),w(!1),P()},children:B?"Salvar":"Adicionar"})]})]})]})]}),e.formasPagamento.length>0&&(0,r.jsxs)(m.$,{variant:"outline",onClick:c,className:"flex items-center gap-2",children:[(0,r.jsx)(ee.A,{className:"h-4 w-4"}),"Limpar Tudo"]})]})]})}),(0,r.jsx)(g,{children:0===e.formasPagamento.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("p",{children:"Nenhuma forma de pagamento adicionada"}),(0,r.jsx)("p",{className:"text-sm",children:'Clique em "Adicionar Forma" para come\xe7ar'})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.formasPagamento.map(e=>(0,r.jsx)(F,{forma:e,onRemover:l,onEditar:V,onAlternarTravamento:u},e.id))})})]}),(0,r.jsx)($,{formasPagamento:e.formasPagamento})]})})}},7238:(e,a,t)=>{Promise.resolve().then(t.bind(t,552))},9434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>s});var r=t(2596),o=t(9688);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,o.QP)((0,r.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[455,160,704,441,684,358],()=>a(7238)),_N_E=e.O()}]);